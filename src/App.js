// Generated by create-react-app 
// @last update on Dec 4, 2021

import React from 'react';
import TimelinePortfolio from "./components/TimelinePortfolioComponent";
import * as timelineData from "./data.json";
import CONST from './util';

function App() {

    return ( 
        <div className="main-canvas">
            <div className="hero-container"></div>
            <div className="portfolio-container">
                {initTimeline()}
            </div> 
            <div className="footer-container"></div>
        </div>
    );
}

/**
 * This function reads data.js and feeds data to timeline
 * @returns rendered timeline   
 */
function initTimeline() {

    const timelineTopTime       = CONST.timelineTopTime;
    const timelineBottomTime    = CONST.timelineBottomTime;

    let data = timelineData.raw;

    // Modify elements in data by appending additional properties
    //  "initdateDepth", "termdateDepth". These are pixel depth from top converted 
    //  from dates
    data.forEach(element => {
        let rawdate = element.termdate;
        if (rawdate === 'Present') {
            element['termdateDepth'] = 0;
        } else {
            let date = new Date(rawdate);
            let p = (CONST.timelineTopTime - date)/1000/60/60/24*CONST.DATE_TO_PIXEL_MULTIPLIER;
            element['termdateDepth'] = p;
        }
        rawdate = element.initdate;
        if (rawdate === 'Present') {
            element['initdateDepth'] = 0;
        }
        let date = new Date(rawdate);
        let p = (CONST.timelineTopTime - date)/1000/60/60/24*CONST.DATE_TO_PIXEL_MULTIPLIER;
        element['initdateDepth'] = p;
    })
   
    const timelineLength = (timelineTopTime - timelineBottomTime)/1000/60/60/24*CONST.DATE_TO_PIXEL_MULTIPLIER;
    return (
        <TimelinePortfolio 
            totalheight={timelineLength}
            data={data}
        />
    );
}

export default App;
